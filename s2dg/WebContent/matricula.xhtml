<?xml version="1.0" encoding="UTF-8"?>

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:s="http://jboss.com/products/seam/taglib"
	template="/layout/template.xhtml">

	<ui:define name="body">
	<rich:panel>
	<f:facet name="header">Efetuar Matrícula</f:facet>
	<center>
	<h:form>
	<h:outputText id="matricula_msg" value="#{matriculaBean.msg}"
		style="float: left; color: red;" />
	<br/>
	<rich:dataTable value="#{matriculaBean.turmasAptas}" var="turma"
		id="turmas_aptas" style="text-align: center" >
		<f:facet name="header">Turmas Aptas</f:facet>
		<rich:column sortOrder="ASCENDING" sortBy="#{turma.disciplina.nome}">
			<f:facet name="header">Disciplina</f:facet>
			<h:outputText value="#{turma.disciplina.nome}" />
		</rich:column>
		<rich:column sortBy="#{turma.numero}">
			<f:facet name="header">Turma</f:facet>
			<h:outputText value="#{turma.numero}" />
		</rich:column>
		<rich:column sortBy="#{turma.disciplina.creditos}">
			<f:facet name="header">Créditos</f:facet>
			<h:outputText value="#{turma.disciplina.creditos}" />
		</rich:column>
		<rich:column>
			<f:facet name="header">Professor(es)</f:facet>
			<a4j:repeat value="#{matriculaBean.listaProfessores(turma)}" var="professor">
				<h:outputText value="#{professor.usuario.nome}" />
				<br/>
			</a4j:repeat>
		</rich:column>
		<rich:column>
			<f:facet name="header">Horário</f:facet>
			<a4j:repeat value="#{turma.horarios}" var="horario">
				<h:outputText value="#{horario.toString()}" />
				<br/>
			</a4j:repeat>
		</rich:column>
		<rich:column>
			<a4j:commandButton action="#{matriculaBean.selecionaTurma(turma)}" value="Selecionar"
				reRender="turmas_selecionadas, turmas_aptas" ajaxSingle="true" />
		</rich:column>
	</rich:dataTable>
	<br/>
	<br/>
	<rich:dataTable value="#{matriculaBean.turmasSelecionadas}" var="turma" id="turmas_selecionadas"
		style="text-align: center" >
		<f:facet name="header">Turmas Selecionadas</f:facet>
		<rich:column sortOrder="ASCENDING" sortBy="#{turma.disciplina.nome}">
			<f:facet name="header">Disciplina</f:facet>
			<h:outputText value="#{turma.disciplina.nome}" />
		</rich:column>
		<rich:column sortBy="#{turma.numero}">
			<f:facet name="header">Turma</f:facet>
			<h:outputText value="#{turma.numero}" />
		</rich:column>
		<rich:column sortBy="#{turma.disciplina.creditos}">
			<f:facet name="header">Créditos</f:facet>
			<h:outputText value="#{turma.disciplina.creditos}" />
		</rich:column>
		<rich:column>
			<f:facet name="header">Professor(es)</f:facet>
			<a4j:repeat value="#{matriculaBean.listaProfessores(turma)}" var="professor">
				<h:outputText value="#{professor.usuario.nome}" />
				<br/>
			</a4j:repeat>
		</rich:column>
		<rich:column>
			<f:facet name="header">Horário</f:facet>
			<a4j:repeat value="#{turma.horarios}" var="horario">
				<h:outputText value="#{horario.toString()}" />
				<br/>
			</a4j:repeat>
		</rich:column>
		<rich:column>
			<a4j:commandButton action="#{matriculaBean.deselecionaTurma(turma)}"
				value="Remover" reRender="turmas_selecionadas, turmas_aptas" ajaxSingle="true" />
		</rich:column>
	</rich:dataTable>
	<br/>
	<a4j:commandButton styleClass="botao_salvar" action="#{matriculaBean.fazMatricula()}"
		value="Matricular" ajaxSingle="true" limitToList="true" reRender="matricula_msg, turmas_selecionadas" />
	<h:commandButton styleClass="botao_salvar" action="home" value="Cancelar" />
	<br/>
	<br/>
	</h:form>
	</center>
	</rich:panel>
	</ui:define>

</ui:composition>